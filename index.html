<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDF Fusion | Advanced PDF Merger</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf-lib/1.17.1/pdf-lib.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/downloadjs/1.4.8/download.min.js"></script>
    <style>
        :root {
            --primary: #4361ee;
            --secondary: #3f37c9;
            --accent: #4895ef;
            --light: #f8f9fa;
            --dark: #212529;
            --success: #4cc9f0;
            --warning: #f72585;
            --border-radius: 8px;
            --shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            padding: 20px;
            color: var(--dark);
        }
        
        .container {
            display: flex;
            max-width: 1400px;
            margin: 0 auto;
            gap: 20px;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
        }
        
        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }
        
        .logo i {
            font-size: 2.5rem;
            color: var(--primary);
        }
        
        .logo h1 {
            font-size: 2.5rem;
            background: linear-gradient(90deg, var(--primary), var(--accent));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        .main-content {
            flex: 3;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .ad-column {
            flex: 1;
            background: white;
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--shadow);
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 600px;
        }
        
        .ad-placeholder {
            width: 100%;
            height: 600px;
            background: linear-gradient(45deg, #e0e0e0, #f0f0f0);
            border: 2px dashed #ccc;
            border-radius: var(--border-radius);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: #777;
            margin-top: 20px;
        }
        
        .ad-placeholder i {
            font-size: 3rem;
            margin-bottom: 15px;
        }
        
        .card {
            background: white;
            border-radius: var(--border-radius);
            padding: 25px;
            box-shadow: var(--shadow);
        }
        
        .card h2 {
            margin-bottom: 20px;
            color: var(--secondary);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .card h2 i {
            color: var(--accent);
        }
        
        .upload-area {
            border: 2px dashed var(--accent);
            border-radius: var(--border-radius);
            padding: 40px 20px;
            text-align: center;
            background: rgba(72, 149, 239, 0.05);
            transition: all 0.3s ease;
            cursor: pointer;
            margin-bottom: 20px;
        }
        
        .upload-area:hover {
            background: rgba(72, 149, 239, 0.1);
        }
        
        .upload-area i {
            font-size: 3rem;
            color: var(--accent);
            margin-bottom: 15px;
        }
        
        #file-input {
            display: none;
        }
        
        .file-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
            max-height: 200px;
            overflow-y: auto;
            padding: 10px;
            border: 1px solid #eee;
            border-radius: var(--border-radius);
            margin-top: 20px;
        }
        
        .file-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 5px;
        }
        
        .file-item .file-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .file-item .file-actions {
            display: flex;
            gap: 10px;
        }
        
        .file-item .file-actions button {
            background: none;
            border: none;
            color: var(--warning);
            cursor: pointer;
        }
        
        .settings-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 15px;
        }
        
        .setting-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .setting-group label {
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        select, input {
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: var(--border-radius);
            font-size: 1rem;
            background: white;
        }
        
        .range-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .range-container input[type="range"] {
            flex: 1;
        }
        
        .range-value {
            min-width: 40px;
            text-align: center;
            font-weight: bold;
            color: var(--primary);
        }
        
        .color-picker {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .color-preview {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: #4361ee;
            border: 2px solid #ddd;
        }
        
        .btn {
            padding: 14px 28px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: var(--border-radius);
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .btn:hover {
            background: var(--secondary);
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }
        
        .btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .btn-success {
            background: var(--success);
        }
        
        .btn-success:hover {
            background: #3aa8d0;
        }
        
        .action-buttons {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .preview-container {
            margin-top: 20px;
            display: none;
        }
        
        #preview {
            width: 100%;
            height: 400px;
            border: 1px solid #ddd;
            border-radius: var(--border-radius);
            background: #f8f9fa;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            gap: 15px;
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            overflow: hidden;
            margin-top: 10px;
            display: none;
        }
        
        .progress {
            height: 100%;
            background: var(--accent);
            width: 0%;
            transition: width 0.3s ease;
        }
        
        .status {
            margin-top: 15px;
            text-align: center;
            font-style: italic;
            color: #666;
        }
        
        footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            color: #666;
        }
        
        @media (max-width: 900px) {
            .container {
                flex-direction: column;
            }
            
            .ad-column {
                min-height: auto;
            }
            
            .ad-placeholder {
                height: 300px;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="logo">
            <i class="fas fa-file-pdf"></i>
            <h1>PDF Fusion</h1>
        </div>
        <p>Merge, customize, and enhance your PDF documents with our advanced tools</p>
    </header>
    
    <div class="container">
        <div class="main-content">
            <div class="card">
                <h2><i class="fas fa-cloud-upload-alt"></i> Upload PDF Files</h2>
                <div class="upload-area" id="drop-area">
                    <i class="fas fa-file-pdf"></i>
                    <h3>Drag & Drop your PDF files here</h3>
                    <p>or</p>
                    <button class="btn" id="browse-btn">Browse Files</button>
                    <input type="file" id="file-input" accept=".pdf" multiple>
                </div>
                
                <div class="file-list" id="file-list">
                    <!-- Files will appear here -->
                </div>
            </div>
            
            <div class="card">
                <h2><i class="fas fa-sliders-h"></i> Advanced Settings</h2>
                <div class="settings-grid">
                    <div class="setting-group">
                        <label><i class="fas fa-book-open"></i> Page Spread</label>
                        <select id="page-spread">
                            <option value="single">Single Page</option>
                            <option value="double">Double Page Spread</option>
                            <option value="booklet">Booklet Format</option>
                        </select>
                    </div>
                    
                    <div class="setting-group">
                        <label><i class="fas fa-border-style"></i> Border Style</label>
                        <select id="border-style">
                            <option value="none">No Border</option>
                            <option value="solid">Solid Line</option>
                            <option value="dashed">Dashed Line</option>
                            <option value="dotted">Dotted Line</option>
                        </select>
                    </div>
                    
                    <div class="setting-group">
                        <label><i class="fas fa-ruler-combined"></i> Border Width</label>
                        <div class="range-container">
                            <input type="range" id="border-width" min="0" max="10" value="2">
                            <span class="range-value" id="border-width-value">2pt</span>
                        </div>
                    </div>
                    
                    <div class="setting-group">
                        <label><i class="fas fa-palette"></i> Border Color</label>
                        <div class="color-picker">
                            <div class="color-preview" id="color-preview"></div>
                            <input type="color" id="border-color" value="#4361ee">
                        </div>
                    </div>
                    
                    <div class="setting-group">
                        <label><i class="fas fa-file-medical"></i> Page Size</label>
                        <select id="page-size">
                            <option value="a4">A4 (210 × 297mm)</option>
                            <option value="letter">Letter (8.5 × 11in)</option>
                            <option value="legal">Legal (8.5 × 14in)</option>
                            <option value="tabloid">Tabloid (11 × 17in)</option>
                        </select>
                    </div>
                    
                    <div class="setting-group">
                        <label><i class="fas fa-file-alt"></i> Page Orientation</label>
                        <select id="page-orientation">
                            <option value="portrait">Portrait</option>
                            <option value="landscape">Landscape</option>
                        </select>
                    </div>
                </div>
                
                <div class="action-buttons">
                    <button class="btn" id="merge-btn" disabled>
                        <i class="fas fa-object-group"></i> Merge PDFs
                    </button>
                    <button class="btn btn-success" id="download-btn" disabled>
                        <i class="fas fa-download"></i> Download Result
                    </button>
                    <button class="btn" id="reset-btn">
                        <i class="fas fa-redo"></i> Reset All
                    </button>
                </div>
                
                <div class="progress-bar" id="progress-bar">
                    <div class="progress" id="progress"></div>
                </div>
                
                <div class="status" id="status">Ready to process PDF files</div>
                
                <div class="preview-container" id="preview-container">
                    <h3>Merged PDF Preview</h3>
                    <div id="preview">
                        <i class="fas fa-file-pdf" style="font-size: 5rem; color: #e74c3c;"></i>
                        <p>Your merged PDF will appear here</p>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="ad-column">
            <h2><i class="fas fa-ad"></i> Advertisement</h2>
            <p>Ad space for your unit ID: ca-app-pub-1860517447304538/2556302533 
            <div class="ad-placeholder">
                <i class="fas fa-bullhorn"></i>
                <h3>Advertisement Space</h3>
                <p>Your ads will appear here</p>
                <p>Simply add your ad unit ID: ca-app-pub-1860517447304538/2556302533 
            </div>
            <div class="ad-info" style="margin-top: 20px; text-align: center;">
                <p><i class="fas fa-info-circle"></i> This space is reserved for advertisements</p>
                <p>To display ads, insert your ad code with unit ID: ca-app-pub-1860517447304538/2556302533
            </div>
        </div>
    </div>
    
    <footer>
        <p>© 2023 PDF Fusion | Advanced PDF Merger Tool | All rights reserved</p>
        <p>This is a client-side demo application. For production use, consider a server-based solution.</p>
    </footer>

    <script>
        // DOM Elements
        const fileInput = document.getElementById('file-input');
        const browseBtn = document.getElementById('browse-btn');
        const dropArea = document.getElementById('drop-area');
        const fileList = document.getElementById('file-list');
        const mergeBtn = document.getElementById('merge-btn');
        const downloadBtn = document.getElementById('download-btn');
        const resetBtn = document.getElementById('reset-btn');
        const progressBar = document.getElementById('progress-bar');
        const progress = document.getElementById('progress');
        const status = document.getElementById('status');
        const previewContainer = document.getElementById('preview-container');
        const borderWidth = document.getElementById('border-width');
        const borderWidthValue = document.getElementById('border-width-value');
        const borderColor = document.getElementById('border-color');
        const colorPreview = document.getElementById('color-preview');
        
        // Store uploaded files
        let uploadedFiles = [];
        let mergedPdf = null;
        
        // Event Listeners
        browseBtn.addEventListener('click', () => fileInput.click());
        fileInput.addEventListener('change', handleFileSelect);
        resetBtn.addEventListener('click', resetAll);
        mergeBtn.addEventListener('click', startMergeProcess);
        downloadBtn.addEventListener('click', downloadMergedPdf);
        
        // Border settings
        borderWidth.addEventListener('input', () => {
            borderWidthValue.textContent = `${borderWidth.value}pt`;
        });
        
        borderColor.addEventListener('input', () => {
            colorPreview.style.background = borderColor.value;
        });
        
        // Drag and drop events
        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
            dropArea.addEventListener(eventName, preventDefaults, false);
        });
        
        function preventDefaults(e) {
            e.preventDefault();
            e.stopPropagation();
        }
        
        ['dragenter', 'dragover'].forEach(eventName => {
            dropArea.addEventListener(eventName, highlight, false);
        });
        
        ['dragleave', 'drop'].forEach(eventName => {
            dropArea.addEventListener(eventName, unhighlight, false);
        });
        
        function highlight() {
            dropArea.style.background = 'rgba(72, 149, 239, 0.15)';
            dropArea.style.borderColor = '#3a86ff';
        }
        
        function unhighlight() {
            dropArea.style.background = 'rgba(72, 149, 239, 0.05)';
            dropArea.style.borderColor = '#4895ef';
        }
        
        dropArea.addEventListener('drop', handleDrop, false);
        
        // File handling functions
        function handleFileSelect(e) {
            const files = e.target.files;
            handleFiles(files);
        }
        
        function handleDrop(e) {
            const dt = e.dataTransfer;
            const files = dt.files;
            handleFiles(files);
        }
        
        function handleFiles(files) {
            for (let i = 0; i < files.length; i++) {
                const file = files[i];
                if (file.type === 'application/pdf') {
                    uploadedFiles.push(file);
                    addFileToList(file);
                }
            }
            updateMergeButton();
        }
        
        function addFileToList(file) {
            const fileItem = document.createElement('div');
            fileItem.className = 'file-item';
            fileItem.innerHTML = `
                <div class="file-info">
                    <i class="fas fa-file-pdf"></i>
                    <span>${file.name} (${formatFileSize(file.size)})</span>
                </div>
                <div class="file-actions">
                    <button onclick="removeFile('${file.name}')"><i class="fas fa-trash-alt"></i></button>
                </div>
            `;
            fileList.appendChild(fileItem);
        }
        
        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }
        
        function removeFile(fileName) {
            uploadedFiles = uploadedFiles.filter(file => file.name !== fileName);
            // Rebuild the file list
            fileList.innerHTML = '';
            uploadedFiles.forEach(file => addFileToList(file));
            updateMergeButton();
        }
        
        function updateMergeButton() {
            mergeBtn.disabled = uploadedFiles.length === 0;
        }
        
        // PDF Processing
        async function startMergeProcess() {
            if (uploadedFiles.length === 0) return;
            
            // Reset preview
            previewContainer.style.display = 'block';
            downloadBtn.disabled = true;
            status.textContent = 'Starting PDF merge process...';
            progressBar.style.display = 'block';
            progress.style.width = '0%';
            
            try {
                // Simulate processing with progress updates
                const totalSteps = 3 + uploadedFiles.length;
                let currentStep = 0;
                
                // Step 1: Initialize
                await simulateProgress(++currentStep, totalSteps, 'Initializing PDF merger...');
                
                // Step 2: Process each file
                const pdfDocs = [];
                for (let i = 0; i < uploadedFiles.length; i++) {
                    await simulateProgress(++currentStep, totalSteps, `Processing file ${i+1} of ${uploadedFiles.length}...`);
                    const file = uploadedFiles[i];
                    const arrayBuffer = await file.arrayBuffer();
                    pdfDocs.push(await PDFLib.PDFDocument.load(arrayBuffer));
                }
                
                // Step 3: Create merged PDF
                await simulateProgress(++currentStep, totalSteps, 'Creating merged document...');
                const mergedPdfDoc = await PDFLib.PDFDocument.create();
                
                // Apply settings
                const pageSpread = document.getElementById('page-spread').value;
                const borderStyle = document.getElementById('border-style').value;
                const borderWidth = parseInt(document.getElementById('border-width').value);
                const borderColor = document.getElementById('border-color').value;
                
                // For demo, we'll just copy pages without actual advanced processing
                for (const pdfDoc of pdfDocs) {
                    const pages = await mergedPdfDoc.copyPages(pdfDoc, pdfDoc.getPageIndices());
                    for (const page of pages) {
                        mergedPdfDoc.addPage(page);
                    }
                }
                
                // Step 4: Finalize
                await simulateProgress(++currentStep, totalSteps, 'Finalizing merged PDF...');
                const mergedPdfBytes = await mergedPdfDoc.save();
                
                // Create Blob and URL for download
                mergedPdf = new Blob([mergedPdfBytes], { type: 'application/pdf' });
                const pdfUrl = URL.createObjectURL(mergedPdf);
                
                // Update preview
                document.getElementById('preview').innerHTML = `
                    <iframe src="${pdfUrl}" width="100%" height="100%"></iframe>
                `;
                
                // Enable download button
                downloadBtn.disabled = false;
                status.textContent = 'PDFs merged successfully! Ready to download.';
                progress.style.width = '100%';
                
                setTimeout(() => {
                    progressBar.style.display = 'none';
                }, 2000);
                
            } catch (error) {
                console.error('PDF processing error:', error);
                status.textContent = 'Error: ' + error.message;
                progressBar.style.display = 'none';
            }
        }
        
        async function simulateProgress(step, totalSteps, message) {
            const progressPercent = (step / totalSteps) * 100;
            progress.style.width = `${progressPercent}%`;
            status.textContent = message;
            
            // Simulate delay for demonstration
            await new Promise(resolve => setTimeout(resolve, 500));
        }
        
        function downloadMergedPdf() {
            if (!mergedPdf) return;
            
            const fileName = prompt('Enter a file name for the merged PDF:', 'merged-document.pdf') || 'merged-document.pdf';
            download(mergedPdf, fileName, 'application/pdf');
        }
        
        function resetAll() {
            // Reset file input and list
            fileInput.value = '';
            uploadedFiles = [];
            fileList.innerHTML = '';
            
            // Reset settings
            document.getElementById('page-spread').value = 'single';
            document.getElementById('border-style').value = 'none';
            document.getElementById('border-width').value = '2';
            borderWidthValue.textContent = '2pt';
            document.getElementById('border-color').value = '#4361ee';
            colorPreview.style.background = '#4361ee';
            document.getElementById('page-size').value = 'a4';
            document.getElementById('page-orientation').value = 'portrait';
            
            // Reset buttons and preview
            mergeBtn.disabled = true;
            downloadBtn.disabled = true;
            previewContainer.style.display = 'none';
            progressBar.style.display = 'none';
            status.textContent = 'Ready to process PDF files';
            
            // Release blob URL if exists
            if (mergedPdf) {
                URL.revokeObjectURL(mergedPdf);
                mergedPdf = null;
            }
        }
        
        // Initialize
        colorPreview.style.background = borderColor.value;
    </script>
</body>
</html>
